<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3D Stickman Game</title>
  <style>
    body { margin: 0; overflow: hidden; }
    #info { position: absolute; top: 10px; left: 10px; color: #fff; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 5px; font-family: sans-serif; }
  </style>
</head>
<body>
  <div id="info">Use arrow keys or WASD to move the stickman</div>
  <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
  <script>
    // Scene setup
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x222233);

    const camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
    camera.position.set(0, 4, 8);

    const renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );

    // Lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
    scene.add(ambientLight);
    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.7);
    directionalLight.position.set(5, 10, 7.5);
    scene.add(directionalLight);

    // Ground
    const groundGeometry = new THREE.PlaneGeometry(40, 40);
    const groundMaterial = new THREE.MeshStandardMaterial({ color: 0x444444 });
    const ground = new THREE.Mesh(groundGeometry, groundMaterial);
    ground.rotation.x = -Math.PI/2;
    scene.add(ground);

    // Stickman group
    const stickman = new THREE.Group();

    // Body
    const body = new THREE.Mesh(
      new THREE.CylinderGeometry(0.2, 0.2, 1.2),
      new THREE.MeshStandardMaterial({color:0x55eeff})
    );
    body.position.y = 1.1;
    stickman.add(body);

    // Head
    const head = new THREE.Mesh(
      new THREE.SphereGeometry(0.3, 24, 24),
      new THREE.MeshStandardMaterial({color:0xffffff})
    );
    head.position.y = 1.9;
    stickman.add(head);

    // Left Arm
    const lArm = new THREE.Mesh(
      new THREE.CylinderGeometry(0.07, 0.07, 0.8),
      new THREE.MeshStandardMaterial({color:0x55eeff})
    );
    lArm.position.set(-0.37, 1.45, 0);
    lArm.rotation.z = Math.PI/4;
    stickman.add(lArm);

    // Right Arm
    const rArm = lArm.clone();
    rArm.position.x = 0.37;
    rArm.rotation.z = -Math.PI/4;
    stickman.add(rArm);

    // Left Leg
    const lLeg = new THREE.Mesh(
      new THREE.CylinderGeometry(0.07, 0.07, 1.0),
      new THREE.MeshStandardMaterial({color:0x55eeff})
    );
    lLeg.position.set(-0.16, 0.35, 0);
    lLeg.rotation.z = Math.PI/16;
    stickman.add(lLeg);

    // Right Leg
    const rLeg = lLeg.clone();
    rLeg.position.x = 0.16;
    rLeg.rotation.z = -Math.PI/16;
    stickman.add(rLeg);

    // Add to scene
    scene.add(stickman);

    // Stickman movement
    let moveForward = false, moveBackward = false, moveLeft = false, moveRight = false;
    const speed = 0.07;

    window.addEventListener('keydown', function(e){
      switch(e.key) {
        case 'w':
        case 'ArrowUp': moveForward = true; break;
        case 's':
        case 'ArrowDown': moveBackward = true; break;
        case 'a':
        case 'ArrowLeft': moveLeft = true; break;
        case 'd':
        case 'ArrowRight': moveRight = true; break;
      }
    });

    window.addEventListener('keyup', function(e){
      switch(e.key) {
        case 'w':
        case 'ArrowUp': moveForward = false; break;
        case 's':
        case 'ArrowDown': moveBackward = false; break;
        case 'a':
        case 'ArrowLeft': moveLeft = false; break;
        case 'd':
        case 'ArrowRight': moveRight = false; break;
      }
    });

    // Animate
    function animate() {
      requestAnimationFrame( animate );

      let dx = 0, dz = 0;
      if(moveForward) dz -= speed;
      if(moveBackward) dz += speed;
      if(moveLeft) dx -= speed;
      if(moveRight) dx += speed;
      stickman.position.x += dx;
      stickman.position.z += dz;

      // Keep camera behind stickman
      camera.position.x = stickman.position.x;
      camera.position.z = stickman.position.z + 8;
      camera.lookAt(stickman.position.x, 1, stickman.position.z);

      renderer.render( scene, camera );
    }
    animate();

    window.addEventListener('resize', function() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

  </script>
</body>
</html>
