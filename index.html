<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stickman Move Example</title>
  <style>
    body { margin:0; overflow:hidden; }
    #instructions {
      position: absolute; top: 10px; left: 10px; color: #fff; background: rgba(0,0,0,0.5); padding: 8px; font-family: sans-serif;
    }
  </style>
</head>
<body>
  <div id="instructions">WASD or Arrow keys to move. Click here and use keys!</div>
  <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
  <script>
    // Scene
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x222233);

    // Camera
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 100);
    camera.position.set(0, 3, 8);

    // Renderer
    const renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Light
    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(3,10,5);
    scene.add(light);
    scene.add(new THREE.AmbientLight(0xffffff, 0.4));

    // Ground
    const ground = new THREE.Mesh(
      new THREE.PlaneGeometry(40,40),
      new THREE.MeshStandardMaterial({color:0x444444})
    );
    ground.rotation.x = -Math.PI/2;
    ground.position.y = 0;
    scene.add(ground);

    // Stickman (super simple version)
    const stickman = new THREE.Group();

    // Head
    const head = new THREE.Mesh(
      new THREE.SphereGeometry(0.3, 24, 24),
      new THREE.MeshStandardMaterial({color:0xffffff})
    );
    head.position.y = 2.1;
    stickman.add(head);

    // Body
    const body = new THREE.Mesh(
      new THREE.CylinderGeometry(0.07, 0.07, 1.0, 16),
      new THREE.MeshStandardMaterial({color:0x181818})
    );
    body.position.y = 1.35;
    stickman.add(body);

    // Left Leg
    const legL = new THREE.Mesh(
      new THREE.CylinderGeometry(0.05,0.05,0.7,12),
      new THREE.MeshStandardMaterial({color:0x181818})
    );
    legL.position.set(-0.12,0.65,0);
    stickman.add(legL);
    // Right Leg
    const legR = legL.clone();
    legR.position.x = 0.12;
    stickman.add(legR);

    // Left Arm
    const armL = new THREE.Mesh(
      new THREE.CylinderGeometry(0.045,0.045,0.6,12),
      new THREE.MeshStandardMaterial({color:0x181818})
    );
    armL.position.set(-0.32,1.73,0);
    armL.rotation.z = Math.PI/6;
    stickman.add(armL);
    // Right Arm
    const armR = armL.clone();
    armR.position.x = 0.32;
    armR.rotation.z = -Math.PI/6;
    stickman.add(armR);

    scene.add(stickman);

    // Movement
    let moveF = false, moveB = false, moveL = false, moveR = false;
    const speed = 0.09;

    window.addEventListener('keydown', e => {
      switch(e.key.toLowerCase()) {
        case 'w': case 'arrowup': moveF = true; break;
        case 's': case 'arrowdown': moveB = true; break;
        case 'a': case 'arrowleft': moveL = true; break;
        case 'd': case 'arrowright': moveR = true; break;
      }
    });
    window.addEventListener('keyup', e => {
      switch(e.key.toLowerCase()) {
        case 'w': case 'arrowup': moveF = false; break;
        case 's': case 'arrowdown': moveB = false; break;
        case 'a': case 'arrowleft': moveL = false; break;
        case 'd': case 'arrowright': moveR = false; break;
      }
    });

    // Animation loop
    function animate() {
      requestAnimationFrame(animate);

      // Movement logic
      let dx = 0, dz = 0;
      if (moveF) dz -= speed;
      if (moveB) dz += speed;
      if (moveL) dx -= speed;
      if (moveR) dx += speed;
      stickman.position.x += dx;
      stickman.position.z += dz;

      // Stickman faces direction of movement
      if(dx !== 0 || dz !== 0)
        stickman.rotation.y = Math.atan2(dx, -dz);

      // Camera follows
      camera.position.x = stickman.position.x;
      camera.position.z = stickman.position.z + 8;
      camera.lookAt(stickman.position.x, 1.2, stickman.position.z);

      renderer.render(scene, camera);
    }
    animate();

    // Responsive canvas
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
