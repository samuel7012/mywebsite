<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Movement</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #character {
            width: 60px;
            height: 60px;
            background-color: red;
            position: absolute;
            bottom: 0;
            left: 50px;
            border-radius: 5px;
            transition: transform 0.1s ease-in-out, bottom 0.1s ease-in-out;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="character"></div>
    </div>

    <script>
        const character = document.getElementById("character");
        let isJumping = false;
        let isRunning = false;
        let isFacingRight = true;
        let characterPosition = 50; // initial left position

        const gameContainer = document.getElementById("game-container");
        const maxRightPosition = gameContainer.clientWidth - character.offsetWidth;

        document.addEventListener("keydown", (e) => {
            if (e.key === "ArrowRight") {
                // Run Right
                if (!isRunning) {
                    isRunning = true;
                    runCharacter("right");
                }
            } else if (e.key === "ArrowLeft") {
                // Run Left
                if (!isRunning) {
                    isRunning = true;
                    runCharacter("left");
                }
            } else if (e.key === " " && !isJumping) {
                // Jump
                jump();
            }
        });

        document.addEventListener("keyup", () => {
            isRunning = false;
            character.style.transition = "none"; // stop running animation
        });

        function runCharacter(direction) {
            if (direction === "right" && !isFacingRight) {
                character.style.transform = "scaleX(1)"; // Face right
                isFacingRight = true;
            } else if (direction === "left" && isFacingRight) {
                character.style.transform = "scaleX(-1)"; // Face left
                isFacingRight = false;
            }

            let moveStep = direction === "right" ? 5 : -5; // Increased speed

            const move = () => {
                characterPosition += moveStep;
                if (characterPosition <= 0) characterPosition = 0;
                if (characterPosition >= maxRightPosition) characterPosition = maxRightPosition;

                character.style.left = characterPosition + "px";

                if (isRunning) {
                    requestAnimationFrame(move); // Smooth movement
                }
            };

            move();
        }

        function jump() {
            isJumping = true;
            let jumpHeight = 0;
            const jumpUp = () => {
                if (jumpHeight < 120) { // Higher jump
                    jumpHeight += 4; // Faster jump
                    character.style.bottom = jumpHeight + "px";
                    requestAnimationFrame(jumpUp);
                } else {
                    fall();
                }
            };

            const fall = () => {
                if (jumpHeight > 0) {
                    jumpHeight -= 4; // Faster fall
                    character.style.bottom = jumpHeight + "px";
                    requestAnimationFrame(fall);
                } else {
                    isJumping = false;
                }
            };

            jumpUp();
        }
    </script>
</body>
</html>
