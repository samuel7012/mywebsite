<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Realistic Glock Simulation</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #111;
    }

    #game-area {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    .gun {
      position: absolute;
      width: 220px;
      height: 130px;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      transition: transform 0.1s ease-out;
    }

    .barrel {
      width: 20px;
      height: 10px;
      background: #555;
      position: absolute;
      top: 5px;
      left: 100px;
      z-index: 4;
      border-radius: 2px;
    }

    .slide {
      width: 200px;
      height: 20px;
      background: linear-gradient(#555, #777);
      border-radius: 4px 4px 0 0;
      position: absolute;
      top: 0;
      left: 0;
      transition: transform 0.1s;
      box-shadow: inset 0 -2px 3px rgba(0,0,0,0.5);
      z-index: 3;
    }

    .body {
      width: 200px;
      height: 50px;
      background: linear-gradient(#222, #444);
      border-radius: 0 0 4px 4px;
      position: absolute;
      bottom: 30px;
      left: 0;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
      z-index: 2;
    }

    .grip {
      width: 45px;
      height: 80px;
      background: linear-gradient(#333, #222);
      position: absolute;
      bottom: 0;
      left: 75px;
      transform: rotate(20deg);
      border-radius: 6px;
      z-index: 1;
      box-shadow: inset -2px 0 4px rgba(0,0,0,0.4);
    }

    .trigger {
      width: 10px;
      height: 25px;
      background: #bbb;
      position: absolute;
      bottom: 30px;
      left: 100px;
      border-radius: 4px;
      transition: transform 0.1s;
      z-index: 4;
    }

    .muzzle-flash {
      width: 30px;
      height: 20px;
      background: radial-gradient(orange, yellow, transparent);
      position: absolute;
      top: -5px;
      left: 110px;
      opacity: 0;
      pointer-events: none;
      border-radius: 50%;
      transition: opacity 0.05s;
      z-index: 10;
    }

    .bullet {
      width: 12px;
      height: 5px;
      background: yellow;
      border-radius: 2px;
      position: absolute;
    }

    .ground {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 20px;
      background: #222;
    }
  </style>
</head>
<body>

<div id="game-area">
  <div class="gun" id="gun">
    <div class="slide"></div>
    <div class="barrel"></div>
    <div class="body"></div>
    <div class="trigger"></div>
    <div class="grip"></div>
    <div class="muzzle-flash" id="muzzle-flash"></div>
  </div>
  <div class="ground"></div>
</div>

<audio id="shoot-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_95c3dbddfa.mp3" preload="auto"></audio>

<script>
  const gun = document.getElementById("gun");
  const muzzleFlash = document.getElementById("muzzle-flash");
  const shootSound = document.getElementById("shoot-sound");
  const gameArea = document.getElementById("game-area");
  const trigger = document.querySelector(".trigger");
  const slide = document.querySelector(".slide");

  // Unlock audio on first click
  document.body.addEventListener("click", () => {
    shootSound.play().catch(() => {});
  }, { once: true });

  document.addEventListener("mousedown", shoot);

  function shoot() {
    // Recoil animation
    gun.style.transform = "translateX(-52%) rotate(-2deg)";
    setTimeout(() => {
      gun.style.transform = "translateX(-50%) rotate(0)";
    }, 100);

    // Trigger and slide animation
    trigger.style.transform = "translateY(5px)";
    slide.style.transform = "translateX(-10px)";
    setTimeout(() => {
      trigger.style.transform = "translateY(0)";
      slide.style.transform = "translateX(0)";
    }, 100);

    // Muzzle flash
    muzzleFlash.style.opacity = 1;
    setTimeout(() => {
      muzzleFlash.style.opacity = 0;
    }, 50);

    // Sound
    shootSound.currentTime = 0;
    shootSound.play().catch(() => {});

    // Bullet
    const bullet = document.createElement("div");
    bullet.className = "bullet";

    const rect = gun.getBoundingClientRect();
    bullet.style.left = (rect.left + 110) + "px";
    bullet.style.top = (rect.top + 15) + "px";
    gameArea.appendChild(bullet);

    let velocityX = 8;

    function moveBullet() {
      const left = parseFloat(bullet.style.left);
      if (left > window.innerWidth) {
        bullet.remove();
        return;
      }

      bullet.style.left = left + velocityX + "px";
      requestAnimationFrame(moveBullet);
    }

    moveBullet();
  }
</script>

</body>
</html>
