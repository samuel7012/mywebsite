<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Realistic Glock 17 Simulation</title>
  <style>
    body {
      margin: 0;
      background-color: #111;
      overflow: hidden;
    }

    #game-area {
      width: 100vw;
      height: 100vh;
      position: relative;
      overflow: hidden;
    }

    .gun {
      position: absolute;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      width: 204px; /* Length of Glock 17 */
      height: 139px; /* Height including magazine */
      transition: transform 0.1s ease-out;
    }

    .slide {
      width: 186px; /* Slide length */
      height: 25.5px; /* Slide width */
      background: linear-gradient(#444, #666);
      border-radius: 4px 4px 0 0;
      position: absolute;
      top: 0;
      left: 10px;
      box-shadow: inset 0 -2px 3px rgba(0,0,0,0.5);
      z-index: 5;
    }

    .barrel {
      width: 12px;
      height: 8px;
      background: #aaa;
      position: absolute;
      top: 10px;
      left: 174px; /* Slide length minus barrel width */
      border-radius: 2px;
      z-index: 6;
    }

    .muzzle-flash {
      width: 30px;
      height: 20px;
      background: radial-gradient(orange, yellow, transparent);
      position: absolute;
      top: 5px;
      left: 184px; /* Slide length minus muzzle flash width */
      opacity: 0;
      border-radius: 50%;
      pointer-events: none;
      transition: opacity 0.05s;
      z-index: 10;
    }

    .frame {
      width: 200px;
      height: 40px;
      background: #222;
      position: absolute;
      top: 30px;
      left: 10px;
      border-radius: 0 0 4px 4px;
      z-index: 3;
    }

    .trigger-guard {
      width: 40px;
      height: 20px;
      background: #222;
      position: absolute;
      top: 50px;
      left: 80px;
      border-radius: 20px 20px 0 0;
      z-index: 2;
    }

    .trigger {
      width: 8px;
      height: 18px;
      background: #bbb;
      position: absolute;
      top: 52px;
      left: 98px;
      border-radius: 4px;
      z-index: 4;
    }

    .grip {
      width: 50px;
      height: 70px;
      background: #333;
      position: absolute;
      top: 60px;
      left: 75px;
      transform: skewY(10deg);
      border-radius: 4px;
      z-index: 1;
    }

    .bullet {
      width: 10px;
      height: 5px;
      background: yellow;
      border-radius: 2px;
      position: absolute;
    }

    .ground {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 20px;
      background: #222;
    }
  </style>
</head>
<body>

<div id="game-area">
  <div class="gun" id="gun">
    <div class="slide"></div>
    <div class="barrel"></div>
    <div class="frame"></div>
    <div class="trigger-guard"></div>
    <div class="trigger"></div>
    <div class="grip"></div>
    <div class="muzzle-flash" id="muzzle-flash"></div>
  </div>
  <div class="ground"></div>
</div>

<audio id="shoot-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_95c3dbddfa.mp3" preload="auto"></audio>

<script>
  const gun = document.getElementById("gun");
  const muzzleFlash = document.getElementById("muzzle-flash");
  const shootSound = document.getElementById("shoot-sound");
  const gameArea = document.getElementById("game-area");

  document.body.addEventListener("click", () => {
    shootSound.play().catch(() => {});
  }, { once: true });

  document.addEventListener("mousedown", shoot);

  function shoot() {
    // Recoil animation
    gun.style.transform = "translateX(-50%) rotate(-2deg)";
    setTimeout(() => {
      gun.style.transform = "translateX(-50%) rotate(0)";
    }, 100);

    // Muzzle flash
    muzzleFlash.style.opacity = 1;
    setTimeout(() => {
      muzzleFlash.style.opacity = 0;
    }, 50);

    // Sound
    shootSound.currentTime = 0;
    shootSound.play().catch(() => {});

    // Bullet
    const bullet = document.createElement("div");
    bullet.className = "bullet";
    const rect = gun.getBoundingClientRect();
    bullet.style.left = (rect.left + 184) + "px";
    bullet.style.top = (rect.top + 14) + "px";
    gameArea.appendChild(bullet);

    let velocityX = 10;

    function moveBullet() {
      const left = parseFloat(bullet.style.left);
      if (left > window.innerWidth) {
        bullet.remove();
        return;
      }
      bullet.style.left = left + velocityX + "px";
      requestAnimationFrame(moveBullet);
    }

    moveBullet();
  }
</script>

</body>
</html>
